<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Word Learning Assistant</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <main class="layout">
    <section class="hero">
      <h1>Word Learning Assistant</h1>
      <p>Upload, fix, review, practice, and report in one workflow. English-first with bilingual support.</p>
      <div class="actions">
        <button id="btn-today" class="big">Today's Plan</button>
        <button id="btn-upload" class="big">Import Words</button>
        <button id="btn-game" class="big">Start Practice</button>
        <button id="btn-dictionary" class="big">Dictionary Card</button>
      </div>

      <div class="voice-row">
        <button id="voice-btn" class="voice" aria-label="Tap to speak">Start Recording</button>
        <label>
          Accent
          <select id="voice-accent">
            <option value="en-GB">UK (en-GB)</option>
            <option value="en-AU">AU (en-AU)</option>
            <option value="en-US">US (en-US)</option>
          </select>
        </label>
        <label>
          Voice
          <select id="voice-preset"></select>
        </label>
        <label class="check-inline"><input id="auto-send-stt" type="checkbox" checked />Auto-send STT text</label>
        <label class="check-inline"><input id="auto-tts" type="checkbox" />Auto-read replies</label>
      </div>
    </section>

    <section class="panel chat-panel">
      <h2>Chat (LLM-driven)</h2>
      <div class="row">
        <button id="chat-clear" type="button">Clear Chat Memory</button>
      </div>
      <div id="chat-log" class="chat-log"></div>
      <div class="chat-input-row">
        <input id="chat-input" placeholder="Type your goal, e.g. learn these words: appraise, bolster, expedite" />
        <button id="chat-send">Send</button>
      </div>
      <div class="tip">Natural language + commands: /learn /learn --words appraise,bolster /today /words /review /new 8 /mistakes /fix wrong correct /card antenna /game spelling /game match /game daily /report week</div>
    </section>

    <section class="panel import-panel">
      <h2>Import (with OCR)</h2>
      <textarea id="import-text" placeholder="Paste your word list text"></textarea>
      <div class="row">
        <input id="import-tags" placeholder="Tags, e.g. Reading,Science" />
        <button id="import-text-btn">Preview Text</button>
      </div>
      <div class="row upload-row">
        <input id="file-input" type="file" />
        <button id="import-file-btn">Preview File</button>
      </div>
      <div id="preview-wrap" class="preview-wrap hidden">
        <h3>Import Preview</h3>
        <div id="preview-list"></div>
        <button id="commit-btn">Import Selected</button>
      </div>
    </section>

    <section class="panel stats-panel">
      <h2>Vocabulary, Fixes & Stats</h2>
      <div class="word-toolbar">
        <div class="status-filter-group">
          <button class="filter-btn active" data-status="ALL">All</button>
          <button class="filter-btn" data-status="NEW">Not Started</button>
          <button class="filter-btn" data-status="IN_PROGRESS">In Progress</button>
          <button class="filter-btn" data-status="MASTERED">Mastered</button>
        </div>
        <div class="row page-size-row">
          <label for="word-page-size">Words per page</label>
          <select id="word-page-size">
            <option value="10">10</option>
            <option value="15" selected>15</option>
            <option value="20">20</option>
            <option value="30">30</option>
          </select>
          <button id="refresh-words">Refresh</button>
        </div>
      </div>
      <div id="word-summary" class="tip"></div>
      <ul id="word-list" class="word-list"></ul>
      <div class="word-pager">
        <button id="word-prev">Prev</button>
        <span id="word-page-info" class="tip">Page 1</span>
        <button id="word-next">Next</button>
      </div>
      <h3>Recent Fixes</h3>
      <ul id="correction-list" class="word-list"></ul>
      <button id="week-report">Generate Weekly Report</button>
      <div id="report-links"></div>
    </section>

    <section class="panel parent-panel">
      <h2>Parent Settings</h2>
      <div class="grid-2">
        <label>Daily new-word limit <input id="setting-new" type="number" min="1" max="40" /></label>
        <label>Daily review limit <input id="setting-review" type="number" min="1" max="200" /></label>
        <label>
          Orchestration mode
          <select id="setting-orchestration">
            <option value="OPENCLAW_PREFERRED">OpenClaw preferred (fallback to local)</option>
            <option value="LOCAL_ONLY">Local only</option>
            <option value="OPENCLAW_ONLY">OpenClaw only</option>
          </select>
        </label>
        <label>
          OCR strength
          <select id="setting-ocr-strength">
            <option value="FAST">Fast (local first)</option>
            <option value="BALANCED">Balanced (recommended)</option>
            <option value="ACCURATE">Accurate (cloud fallback if needed)</option>
          </select>
        </label>
        <label>Auto-accept threshold <input id="setting-auto-accept-threshold" type="number" min="0.5" max="0.99" step="0.01" /></label>
        <label class="check-inline"><input id="setting-strict" type="checkbox" />Strict mode</label>
        <label class="check-inline"><input id="setting-llm" type="checkbox" />Enable LLM routing</label>
        <label class="check-inline"><input id="setting-auto-tts" type="checkbox" />Auto speech playback</label>
        <label>Card quality model <input id="setting-card-quality-model" placeholder="e.g. gpt-4.1-mini" /></label>
        <label>Card fast model <input id="setting-card-fast-model" placeholder="e.g. gpt-4o-mini" /></label>
        <label>
          Card strategy
          <select id="setting-card-strategy">
            <option value="QUALITY_FIRST">Quality first (recommended)</option>
            <option value="BALANCED">Balanced</option>
            <option value="FAST_FIRST">Fast first</option>
          </select>
        </label>
      </div>
      <div class="row">
        <button id="save-settings">Save Settings</button>
        <button id="export-csv">Export CSV</button>
        <button id="export-xlsx">Export XLSX</button>
        <button id="create-backup">Create Backup</button>
        <button id="refresh-openclaw-status">OpenClaw Status</button>
      </div>
      <div id="parent-links"></div>
      <div id="openclaw-status" class="tip"></div>
    </section>
  </main>

  <script src="/static/app.js"></script>
</body>
</html>
